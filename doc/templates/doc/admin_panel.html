{% extends 'base.html' %}

{% block content %}
<div class="container">
    <h1 class="text-center mb-4">Панель администратора</h1>

    <!-- Быстрый переход к моделям через теги -->
    <nav class="nav nav-pills flex-column flex-sm-row mb-4">
        <a class="flex-sm-fill text-sm-center nav-link" href="#interns">Практиканты</a>
        <a class="flex-sm-fill text-sm-center nav-link" href="#groups">Группы</a>
        <a class="flex-sm-fill text-sm-center nav-link" href="#organizations">Организации</a>
        <a class="flex-sm-fill text-sm-center nav-link" href="#supervisors">Руководители</a>
        <a class="flex-sm-fill text-sm-center nav-link" href="#specialties">Специальности</a>
        <a class="flex-sm-fill text-sm-center nav-link" href="#org_supervisors">Руководители организаций</a>
    </nav>

    <!-- Таблица для Практикантов -->
    <h2 id="interns" class="mb-3">Практиканты</h2>
    <button class="btn btn-dark mb-3" data-toggle="modal" data-target="#addInternModal">Добавить практиканта</button>
    <table class="table table-striped">
        <thead>
            <tr>
                <th>Фамилия</th>
                <th>Имя</th>
                <th>Отчество</th>
                <th>Группа</th>
                <th>Организация</th>
                <th>Действия</th>
            </tr>
        </thead>
        <tbody>
            {% for intern in interns %}
            <tr>
                <td>{{ intern.last_name }}</td>
                <td>{{ intern.first_name }}</td>
                <td>{{ intern.middle_name }}</td>
                <td>{{ intern.group.name }}</td>
                <td>{{ intern.organization.full_name }}</td>
                <td>
                    <a href="{% url 'admin_edit' 'intern' intern.id %}" class="btn btn-primary btn-sm">Редактировать</a>
                    <a href="{% url 'admin_delete' 'intern' intern.id %}" class="btn btn-danger btn-sm">Удалить</a>
                </td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
    <!-- Пагинация для Практикантов -->
    {% if interns.has_other_pages %}
    <nav aria-label="Page navigation">
        <ul class="pagination">
            {% if interns.has_previous %}
            <li class="page-item">
                <a class="page-link" href="?page={{ interns.previous_page_number }}#interns" aria-label="Previous">
                    <span aria-hidden="true">&laquo;</span>
                </a>
            </li>
            {% else %}
            <li class="page-item disabled">
                <span class="page-link">&laquo;</span>
            </li>
            {% endif %}
            {% for i in interns.paginator.page_range %}
            <li class="page-item {% if interns.number == i %}active{% endif %}">
                <a class="page-link" href="?page={{ i }}#interns">{{ i }}</a>
            </li>
            {% endfor %}
            {% if interns.has_next %}
            <li class="page-item">
                <a class="page-link" href="?page={{ interns.next_page_number }}#interns" aria-label="Next">
                    <span aria-hidden="true">&raquo;</span>
                </a>
            </li>
            {% else %}
            <li class="page-item disabled">
                <span class="page-link">&raquo;</span>
            </li>
            {% endif %}
        </ul>
    </nav>
    {% endif %}

    <!-- Модальное окно для добавления практиканта -->
    <div class="modal fade" id="addInternModal" tabindex="-1" role="dialog" aria-labelledby="addInternModalLabel" aria-hidden="true">
        <div class="modal-dialog" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="addInternModalLabel">Добавить практиканта</h5>
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                    </button>
                </div>
                <div class="modal-body">
                    <form method="post" action="{% url 'admin_add' 'intern' %}">
                        {% csrf_token %}
                        {{ intern_form.as_p }}
                        <button type="submit" class="btn btn-dark">Сохранить</button>
                    </form>
                </div>
            </div>
        </div>
    </div>

    <!-- Аналогичные таблицы и модальные окна для других моделей -->
    <!-- Группы -->
    <h2 id="groups" class="mb-3">Группы</h2>
    <button class="btn btn-dark mb-3" data-toggle="modal" data-target="#addGroupModal">Добавить группу</button>
    <table class="table table-striped">
        <thead>
            <tr>
                <th>Название</th>
                <th>Специальность</th>
                <th>Действия</th>
            </tr>
        </thead>
        <tbody>
            {% for group in groups %}
            <tr>
                <td>{{ group.name }}</td>
                <td>{{ group.specialty.name }}</td>
                <td>
                    <a href="{% url 'admin_edit' 'group' group.id %}" class="btn btn-primary btn-sm">Редактировать</a>
                    <a href="{% url 'admin_delete' 'group' group.id %}" class="btn btn-danger btn-sm">Удалить</a>
                </td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
    <!-- Пагинация для Групп -->
    {% if groups.has_other_pages %}
    <nav aria-label="Page navigation">
        <ul class="pagination">
            {% if groups.has_previous %}
            <li class="page-item">
                <a class="page-link" href="?page={{ groups.previous_page_number }}#groups" aria-label="Previous">
                    <span aria-hidden="true">&laquo;</span>
                </a>
            </li>
            {% else %}
            <li class="page-item disabled">
                <span class="page-link">&laquo;</span>
            </li>
            {% endif %}
            {% for i in groups.paginator.page_range %}
            <li class="page-item {% if groups.number == i %}active{% endif %}">
                <a class="page-link" href="?page={{ i }}#groups">{{ i }}</a>
            </li>
            {% endfor %}
            {% if groups.has_next %}
            <li class="page-item">
                <a class="page-link" href="?page={{ groups.next_page_number }}#groups" aria-label="Next">
                    <span aria-hidden="true">&raquo;</span>
                </a>
            </li>
            {% else %}
            <li class="page-item disabled">
                <span class="page-link">&raquo;</span>
            </li>
            {% endif %}
        </ul>
    </nav>
    {% endif %}

    <!-- Организации -->
    <h2 id="organizations" class="mb-3">Организации</h2>
    <button class="btn btn-dark mb-3" data-toggle="modal" data-target="#addOrganizationModal">Добавить организацию</button>
    <table class="table table-striped">
        <thead>
            <tr>
                <th>Название</th>
                <th>Юридический адрес</th>
                <th>Действия</th>
            </tr>
        </thead>
        <tbody>
            {% for organization in organizations %}
            <tr>
                <td>{{ organization.full_name }}</td>
                <td>{{ organization.legal_address }}</td>
                <td>
                    <a href="{% url 'admin_edit' 'organization' organization.id %}" class="btn btn-primary btn-sm">Редактировать</a>
                    <a href="{% url 'admin_delete' 'organization' organization.id %}" class="btn btn-danger btn-sm">Удалить</a>
                </td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
    <!-- Пагинация для Организаций -->
    {% if organizations.has_other_pages %}
    <nav aria-label="Page navigation">
        <ul class="pagination">
            {% if organizations.has_previous %}
            <li class="page-item">
                <a class="page-link" href="?page={{ organizations.previous_page_number }}#organizations" aria-label="Previous">
                    <span aria-hidden="true">&laquo;</span>
                </a>
            </li>
            {% else %}
            <li class="page-item disabled">
                <span class="page-link">&laquo;</span>
            </li>
            {% endif %}
            {% for i in organizations.paginator.page_range %}
            <li class="page-item {% if organizations.number == i %}active{% endif %}">
                <a class="page-link" href="?page={{ i }}#organizations">{{ i }}</a>
            </li>
            {% endfor %}
            {% if organizations.has_next %}
            <li class="page-item">
                <a class="page-link" href="?page={{ organizations.next_page_number }}#organizations" aria-label="Next">
                    <span aria-hidden="true">&raquo;</span>
                </a>
            </li>
            {% else %}
            <li class="page-item disabled">
                <span class="page-link">&raquo;</span>
            </li>
            {% endif %}
        </ul>
    </nav>
    {% endif %}

    <!-- Руководители -->
    <h2 id="supervisors" class="mb-3">Руководители</h2>
    <button class="btn btn-dark mb-3" data-toggle="modal" data-target="#addSupervisorModal">Добавить руководителя</button>
    <table class="table table-striped">
        <thead>
            <tr>
                <th>Фамилия</th>
                <th>Имя</th>
                <th>Отчество</th>
                <th>Должность</th>
                <th>Действия</th>
            </tr>
        </thead>
        <tbody>
            {% for supervisor in supervisors %}
            <tr>
                <td>{{ supervisor.last_name }}</td>
                <td>{{ supervisor.first_name }}</td>
                <td>{{ supervisor.middle_name }}</td>
                <td>{{ supervisor.position }}</td>
                <td>
                    <a href="{% url 'admin_edit' 'college_supervisor' supervisor.id %}" class="btn btn-primary btn-sm">Редактировать</a>
                    <a href="{% url 'admin_delete' 'college_supervisor' supervisor.id %}" class="btn btn-danger btn-sm">Удалить</a>
                </td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
    <!-- Пагинация для Руководителей -->
    {% if supervisors.has_other_pages %}
    <nav aria-label="Page navigation">
        <ul class="pagination">
            {% if supervisors.has_previous %}
            <li class="page-item">
                <a class="page-link" href="?page={{ supervisors.previous_page_number }}#supervisors" aria-label="Previous">
                    <span aria-hidden="true">&laquo;</span>
                </a>
            </li>
            {% else %}
            <li class="page-item disabled">
                <span class="page-link">&laquo;</span>
            </li>
            {% endif %}
            {% for i in supervisors.paginator.page_range %}
            <li class="page-item {% if supervisors.number == i %}active{% endif %}">
                <a class="page-link" href="?page={{ i }}#supervisors">{{ i }}</a>
            </li>
            {% endfor %}
            {% if supervisors.has_next %}
            <li class="page-item">
                <a class="page-link" href="?page={{ supervisors.next_page_number }}#supervisors" aria-label="Next">
                    <span aria-hidden="true">&raquo;</span>
                </a>
            </li>
            {% else %}
            <li class="page-item disabled">
                <span class="page-link">&raquo;</span>
            </li>
            {% endif %}
        </ul>
    </nav>
    {% endif %}

    <!-- Специальности -->
    <h2 id="specialties" class="mb-3">Специальности</h2>
    <button class="btn btn-dark mb-3" data-toggle="modal" data-target="#addSpecialtyModal">Добавить специальность</button>
    <table class="table table-striped">
        <thead>
            <tr>
                <th>Код</th>
                <th>Название</th>
                <th>Действия</th>
            </tr>
        </thead>
        <tbody>
            {% for specialty in specialties %}
            <tr>
                <td>{{ specialty.code }}</td>
                <td>{{ specialty.name }}</td>
                <td>
                    <a href="{% url 'admin_edit' 'specialty' specialty.id %}" class="btn btn-primary btn-sm">Редактировать</a>
                    <a href="{% url 'admin_delete' 'specialty' specialty.id %}" class="btn btn-danger btn-sm">Удалить</a>
                </td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
    <!-- Пагинация для Специальностей -->
    {% if specialties.has_other_pages %}
    <nav aria-label="Page navigation">
        <ul class="pagination">
            {% if specialties.has_previous %}
            <li class="page-item">
                <a class="page-link" href="?page={{ specialties.previous_page_number }}#specialties" aria-label="Previous">
                    <span aria-hidden="true">&laquo;</span>
                </a>
            </li>
            {% else %}
            <li class="page-item disabled">
                <span class="page-link">&laquo;</span>
            </li>
            {% endif %}
            {% for i in specialties.paginator.page_range %}
            <li class="page-item {% if specialties.number == i %}active{% endif %}">
                <a class="page-link" href="?page={{ i }}#specialties">{{ i }}</a>
            </li>
            {% endfor %}
            {% if specialties.has_next %}
            <li class="page-item">
                <a class="page-link" href="?page={{ specialties.next_page_number }}#specialties" aria-label="Next">
                    <span aria-hidden="true">&raquo;</span>
                </a>
            </li>
            {% else %}
            <li class="page-item disabled">
                <span class="page-link">&raquo;</span>
            </li>
            {% endif %}
        </ul>
    </nav>
    {% endif %}

    <!-- Руководители организаций -->
    <h2 id="org_supervisors" class="mb-3">Руководители организаций</h2>
    <button class="btn btn-dark mb-3" data-toggle="modal" data-target="#addOrgSupervisorModal">Добавить руководителя организации</button>
    <table class="table table-striped">
        <thead>
            <tr>
                <th>Фамилия</th>
                <th>Имя</th>
                <th>Отчество</th>
                <th>Должность</th>
                <th>Организация</th>
                <th>Действия</th>
            </tr>
        </thead>
        <tbody>
            {% for org_supervisor in org_supervisors %}
            <tr>
                <td>{{ org_supervisor.last_name }}</td>
                <td>{{ org_supervisor.first_name }}</td>
                <td>{{ org_supervisor.middle_name }}</td>
                <td>{{ org_supervisor.position }}</td>
                <td>{{ org_supervisor.organization.full_name }}</td>
                <td>
                    <a href="{% url 'admin_edit' 'org_supervisor' org_supervisor.id %}" class="btn btn-primary btn-sm">Редактировать</a>
                    <a href="{% url 'admin_delete' 'org_supervisor' org_supervisor.id %}" class="btn btn-danger btn-sm">Удалить</a>
                </td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
    <!-- Пагинация для Руководителей организаций -->
    {% if org_supervisors.has_other_pages %}
    <nav aria-label="Page navigation">
        <ul class="pagination">
            {% if org_supervisors.has_previous %}
            <li class="page-item">
                <a class="page-link" href="?page={{ org_supervisors.previous_page_number }}#org_supervisors" aria-label="Previous">
                    <span aria-hidden="true">&laquo;</span>
                </a>
            </li>
            {% else %}
            <li class="page-item disabled">
                <span class="page-link">&laquo;</span>
            </li>
            {% endif %}
            {% for i in org_supervisors.paginator.page_range %}
            <li class="page-item {% if org_supervisors.number == i %}active{% endif %}">
                <a class="page-link" href="?page={{ i }}#org_supervisors">{{ i }}</a>
            </li>
            {% endfor %}
            {% if org_supervisors.has_next %}
            <li class="page-item">
                <a class="page-link" href="?page={{ org_supervisors.next_page_number }}#org_supervisors" aria-label="Next">
                    <span aria-hidden="true">&raquo;</span>
                </a>
            </li>
            {% else %}
            <li class="page-item disabled">
                <span class="page-link">&raquo;</span>
            </li>
            {% endif %}
        </ul>
    </nav>
    {% endif %}

</div>
{% endblock %}